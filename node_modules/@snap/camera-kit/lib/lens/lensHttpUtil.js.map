{"version":3,"file":"lensHttpUtil.js","sourceRoot":"","sources":["../../src/lens/lensHttpUtil.ts"],"names":[],"mappings":";AACA,OAAO,EAAE,kBAAkB,EAAE,WAAW,EAAa,MAAM,QAAQ,CAAC;AAEpE,MAAM,SAAS,GAAG,2DAA2D,CAAC;AAE9E,SAAS,YAAY,CAAC,GAAa;IAC/B,OAAO,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;AAC3C,CAAC;AAED,MAAM,UAAgB,qBAAqB,CACvC,UAAwB,EACxB,MAAc,EACd,OAAe;;QAEf,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACvE,MAAM,QAAQ,GAAG,MAAM,UAAU,CAAC,GAAG,EAAE,EAAE,WAAW,EAAE,SAAS,EAAE,CAAC,CAAC;QACnE,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;QACnC,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACvB,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE;YACpB,MAAM,IAAI,KAAK,CACX,uBAAuB,GAAG,8BAA8B,IAAI,CAAC,SAAS,CAClE,IAAI,CACP,wBAAwB,YAAY,CAAC,QAAQ,CAAC,GAAG,CACrD,CAAC;SACL;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;CAAA;AAED,MAAM,UAAgB,0BAA0B,CAAC,UAAwB,EAAE,OAAe;;QACtF,MAAM,GAAG,GAAG,CAAC,SAAS,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QACrD,MAAM,QAAQ,GAAG,MAAM,UAAU,CAAC,GAAG,EAAE,EAAE,WAAW,EAAE,SAAS,EAAE,CAAC,CAAC;QACnE,MAAM,IAAI,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE,CAAC;QACnC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE;YAC3B,MAAM,IAAI,KAAK,CACX,uBAAuB,GAAG,mCAAmC,IAAI,CAAC,SAAS,CACvE,IAAI,CACP,wBAAwB,YAAY,CAAC,QAAQ,CAAC,GAAG,CACrD,CAAC;SACL;QACD,OAAO,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;CAAA","sourcesContent":["import { FetchHandler } from \"../handlers/defaultFetchHandler\";\nimport { isGetGroupResponse, isLensProto, LensProto } from \"./Lens\";\n\nconst BASE_PATH = \"https://api-kit.snapchat.com/com.snap.camerakit.v3.Lenses\";\n\nfunction getRequestId(res: Response) {\n    return res.headers.get(\"x-request-id\");\n}\n\nexport async function retrieveCameraKitLens(\n    httpClient: FetchHandler,\n    lensId: string,\n    groupId: string\n): Promise<LensProto> {\n    const url = [BASE_PATH, \"groups\", groupId, \"lenses\", lensId].join(\"/\");\n    const response = await httpClient(url, { credentials: \"include\" });\n    const body = await response.json();\n    const lens = body.lens;\n    if (!isLensProto(lens)) {\n        throw new Error(\n            `Expected request to ${url} to return a Lens. Got:\\n\\n${JSON.stringify(\n                body\n            )} with request-id of \"${getRequestId(response)}\"`\n        );\n    }\n    return lens;\n}\n\nexport async function retrieveCameraKitLensGroup(httpClient: FetchHandler, groupId: string): Promise<LensProto[]> {\n    const url = [BASE_PATH, \"groups\", groupId].join(\"/\");\n    const response = await httpClient(url, { credentials: \"include\" });\n    const body = await response.json();\n    if (!isGetGroupResponse(body)) {\n        throw new Error(\n            `Expected request to ${url} to return a LensGroup. Got:\\n\\n${JSON.stringify(\n                body\n            )} with request-id of \"${getRequestId(response)}\"`\n        );\n    }\n    return body.lenses;\n}\n"]}