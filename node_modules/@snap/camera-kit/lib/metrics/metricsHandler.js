import { Injectable } from "../dependency-injection/Injectable";
import { cameraKitServiceFetchHandlerFactory } from "../handlers/cameraKitServiceFetchHandlerFactory";
import { HandlerChainBuilder } from "../handlers/HandlerChainBuilder";
import { createRateLimitingHandler } from "../handlers/rateLimitingHandler";
const METRIC_REQUEST_RATE_LIMIT_MS = 1000; // send at most one metric request per second.
/**
 * @internal
 */
export const metricsHandlerFactory = Injectable("metricsHandler", [cameraKitServiceFetchHandlerFactory.token], (fetchHandler) => {
    return new HandlerChainBuilder(fetchHandler).map(createRateLimitingHandler(METRIC_REQUEST_RATE_LIMIT_MS))
        .handler;
});
//# sourceMappingURL=metricsHandler.js.map